<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ConfigurationBuilder.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">multi-module-report</a> &gt; <a href="index.source.html" class="el_package">com.sebastmar.module.report.configuration</a> &gt; <span class="el_source">ConfigurationBuilder.kt</span></div><h1>ConfigurationBuilder.kt</h1><pre class="source lang-java linenums">@file:Suppress(&quot;MemberVisibilityCanBePrivate&quot;)

package com.sebastmar.module.report.configuration

import com.sebastmar.module.report.info.Module
import com.sebastmar.module.report.internal.Configuration
import com.sebastmar.module.report.internal.ReportStrings
import com.sebastmar.module.report.internal.ShouldLinkifyFiles
import com.sebastmar.module.report.internal.ShowCircleIndicators
import com.sebastmar.module.report.internal.ShowLineIndicators
import com.sebastmar.module.report.internal.SkipReportKeyword

@DslMarker
public annotation class ConfigurationBuilderDsl

@DslMarker
public annotation class StringBuilderDsl

/**
 * A builder class for configuring reports.
 *
 * This class provides a DSL for configuring various aspects of a report,
 * such as whether to write sections and how to intercept modules.
 */
<span class="fc" id="L25">@ConfigurationBuilderDsl</span>
public class ConfigurationBuilder {

    /**
     * Determines whether links to the diff page for each file are added to the report.
     * When `true`, links are added. When `false`, links are omitted.
     * Defaults to `true`.
     */
<span class="fc" id="L33">    public var linkifyFiles: Boolean = true</span>

    /**
     * Toggles whether circle indicators are displayed to the left of each file name.
     * Default value is `true`.
     */
<span class="fc" id="L39">    public var showCircleIndicators: Boolean = true</span>

    /**
     * Toggles whether the (+/-) ine indicator is displayed to next to the &quot;Added&quot;, &quot;Modified&quot;, &quot;Deleted&quot; sections.
     * Default value is `true`.
     */
<span class="fc" id="L45">    public var showLineIndicators: Boolean = true</span>

    /**
     * Allows modules to be intercepted, modified, or omitted from the report.
     * By default, this is a [NoOpModulesInterceptor] which performs no interception.
     * @see ModulesInterceptor
     */
<span class="fc" id="L52">    private var modulesInterceptor: ModulesInterceptor = NoOpModulesInterceptor</span>

    /**
     * Defines the strings used within the report.
     * This allows for customization and localization of the text displayed in the generated report.
     * Defaults to an instance of [ReportStrings] with default English strings.
     * @see ReportStrings
     */
<span class="fc" id="L60">    private var reportStringsBuilder: ReportStringsBuilder = ReportStringsBuilder()</span>

    /**
     * Configures [reportStringsBuilder] using a dedicated DSL builder.
     * Example:
     * reportStrings {
     *   projectRootModuleName = &quot;Root&quot;
     *   unknownModuleName = &quot;Others&quot;
     * }
     */
<span class="nc" id="L70">    public fun reportStrings(block: ReportStringsBuilder.() -&gt; Unit = {}) {</span>
<span class="fc" id="L71">        reportStringsBuilder = ReportStringsBuilder().apply(block)</span>
<span class="fc" id="L72">    }</span>

    /**
     * Sets an interceptor for the list of modules used in the report generation process.
     *
     * The interceptor allows for customization of the modules list by modifying or filtering
     * the modules before they are processed further.
     *
     * Example:
     * ```kotlin
     * modulesInterceptor { modules -&gt;
     *     modules.filterNot { it.name == &quot;internal-module&quot; } // Exclude a specific module
     * }
     * ```
     *
     * @param block A lambda function that takes the current list of [Module]s as input
     *              and returns a new, possibly modified, list of [Module]s.
     *              The returned list will be used for report generation.
     */
    public fun modulesInterceptor(block: (List&lt;Module&gt;) -&gt; List&lt;Module&gt;) {
<span class="fc" id="L92">        modulesInterceptor = ModulesInterceptor(block)</span>
<span class="fc" id="L93">    }</span>

    /**
     * If the PR description contains these keywords, the report generation will be skipped.
     * Default value is `module-no-report`.
     */
<span class="fc" id="L99">    public var skipReportKeyword: String = &quot;module-no-report&quot;</span>

<span class="fc" id="L101">    internal fun build(): Configuration = Configuration(</span>
<span class="fc" id="L102">        shouldLinkifyFiles = ShouldLinkifyFiles(linkifyFiles),</span>
<span class="fc" id="L103">        showCircleIndicators = ShowCircleIndicators(showCircleIndicators),</span>
<span class="fc" id="L104">        showLineIndicators = ShowLineIndicators(showLineIndicators),</span>
<span class="fc" id="L105">        modulesInterceptor = modulesInterceptor,</span>
<span class="fc" id="L106">        skipReportKeyword = SkipReportKeyword(skipReportKeyword),</span>
<span class="fc" id="L107">        reportStrings = reportStringsBuilder.build(),</span>
<span class="fc" id="L108">    )</span>
}

/**
 * A builder class for customizing the string components of a report.
 *
 * This DSL (Domain Specific Language) builder is designed to be used in contexts that require
 * the customization of text sections, warnings, or labels within generated reports.
 */
@StringBuilderDsl
<span class="fc" id="L118">public class ReportStringsBuilder internal constructor() {</span>

    /**
     * Represents the customizable top section of a report.
     * Can be set to modify the heading or introductory text at the top of the generated report.
     */
<span class="fc" id="L124">    public var topSection: String? = &quot;# Updated Modules&quot;</span>

    /**
     * Represents the customizable bottom section of a report.
     * It is an optional string that is appended to the end of the report.
     * By default, it includes a generated footer message for attribution.
     */
<span class="fc" id="L131">    public var bottomSection: String? =</span>
<span class="fc" id="L132">        &quot;_Generated by [multi-module-report](https://github.com/SebVay/Multi-Module-Report)_ with ❤️&quot;</span>

    /**
     * Represents the default name for the root module of a project.
     *
     * This property is used during the generation of multi-module reports to label the root module within the report.
     *
     * This value can be customized if a different designation for the root module is needed.
     */
<span class="fc" id="L141">    public var projectRootModuleName: String = &quot;Project's Root&quot;</span>

    /**
     * Represents the default name used for paths that cannot be identified
     * or categorized explicitly in the reporting process.
     *
     * This value can be customized to better suit specific report configurations.
     */
<span class="fc" id="L149">    public var unknownModuleName: String = &quot;Others&quot;</span>

    /**
     * Builds and returns a [ReportStrings] instance using the current state of the builder.
     *
     * @return A [ReportStrings] instance configured with the current properties of the builder.
     */
<span class="fc" id="L156">    internal fun build(): ReportStrings = ReportStrings(</span>
<span class="fc" id="L157">        topSection = topSection,</span>
<span class="fc" id="L158">        bottomSection = bottomSection,</span>
<span class="fc" id="L159">        projectRootModuleName = projectRootModuleName,</span>
<span class="fc" id="L160">        unknownModuleName = unknownModuleName,</span>
<span class="fc" id="L161">    )</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>